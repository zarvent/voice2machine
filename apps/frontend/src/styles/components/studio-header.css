@layer components {
  /* --- STUDIO HEADER --- */
  .studio-header {
    /* Base styles */
    height: var(--header-height);
    padding: 0 var(--space-lg);
    display: flex;
    align-items: center;
    gap: var(--space-md);
    flex-shrink: 0;

    /* Frosted Glass */
    background: var(--bg-glass);
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);

    border-bottom: 1px solid var(--border-subtle);
    position: sticky;
    top: 0;
    z-index: 10;
    box-shadow: inset 0 -1px 0 0 oklch(1 1 1 / 0.05);
  }

  /* Left Section: Title + Edit Icon + Badge */
  .studio-title-section {
    flex: 1; /* Takes available space */
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    min-width: 0; /* Critical for truncation! */
  }

  .studio-title-display {
    background: none;
    border: none;
    padding: 0;
    margin: 0;
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    cursor: pointer;
    max-width: 100%;
    min-width: 0; /* Also critical */

    &:hover .studio-title-edit-icon {
      opacity: 1;
    }
  }

  .studio-title-text {
    font-size: var(--text-lg);
    font-weight: 700;
    letter-spacing: -0.02em;
    text-shadow: 0 1px 2px oklch(0 0 0 / 0.2);

    /* Force Truncation */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block; /* Ensure it respects width */
  }

  .studio-title-edit-icon {
    opacity: 0;
    transition: opacity 0.2s;
    flex-shrink: 0;
    color: var(--fg-muted);
    display: flex;
  }

  /* Badge: "Draft" */
  .studio-title-hint {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: var(--text-xs);
    color: var(--fg-muted);
    background: var(--bg-surface);
    padding: 2px 8px;
    border-radius: var(--radius-full);
    border: 1px solid var(--border-subtle);
    flex-shrink: 0; /* Badge never shrinks */

    .hint-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: var(--color-warning);
      box-shadow: 0 0 6px var(--color-warning);
    }
  }

  .studio-header-actions {
    display: flex;
    gap: var(--space-sm);
    flex-shrink: 0; /* Actions never shrink */
  }

  /* --- SPATIAL REDESIGN OVERRIDES (Kaizen) --- */

  /* HEADER: Control Deck */
  .studio-header {
    justify-content: space-between;
    padding: 1rem 1.5rem;
    background: var(--color-surface-glass);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-bottom: 1px solid var(--color-border-glass);
    height: 72px; /* Overrides variable */
  }

  .studio-header-video-controls {
    display: flex;
    gap: 0.5rem;
    color: var(--color-primary-base);
  }

  .studio-header-actions {
    align-items: center;
    gap: 1rem;
  }

  /* MAGNETIC SWITCH (Translate) */
  .semantic-toggle-group {
    position: relative;
    display: flex;
    background: rgba(0, 0, 0, 0.05); /* Slight contrast */
    border-radius: 99px;
    padding: 4px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .semantic-toggle-option {
    position: relative;
    z-index: 2;
    background: transparent;
    border: none;
    padding: 6px 12px;
    border-radius: 99px;
    cursor: pointer;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 600;
    font-size: 0.85rem;
    transition: color 0.3s var(--ease-smooth);
  }

  .semantic-toggle-option:hover {
    color: rgba(255, 255, 255, 0.8);
  }

  .semantic-toggle-option.active {
    color: white;
  }

  .toggle-indicator {
    position: absolute;
    top: 4px;
    bottom: 4px;
    width: calc(50% - 4px);
    background: var(--color-primary-base);
    border-radius: 99px;
    z-index: 1;
    transition: transform 0.3s var(--ease-spring);
    box-shadow: 0 2px 8px var(--color-primary-glow);
  }

  /* Logic for toggle position */
  .toggle-indicator.en {
    transform: translateX(0);
  }
  .toggle-indicator.es {
    transform: translateX(100%);
  }

  .studio-title-input {
    background: var(--bg-surface);
    border: 1px solid var(--border-strong);
    border-radius: var(--radius-sm);
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--fg-primary);
    outline: none;

    &:focus {
      border-color: var(--color-primary-base);
      box-shadow: 0 0 0 2px var(--color-primary-faint);
    }
  }
}
