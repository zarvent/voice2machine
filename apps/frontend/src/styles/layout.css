@layer layout {
  :root {
    /* Utility for noise texture - Organic feel */
    --bg-noise: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");

    /* --- SPATIAL DESIGN SYSTEM 2026 (Kaizen Optimized) --- */
    /* Colors: OKLCH for perceptual uniformity and efficiency */
    --color-primary-base: oklch(0.65 0.22 260); /* Deep Electric Blue */
    --color-primary-glow: oklch(0.65 0.22 260 / 0.4);
    --color-surface-glass: oklch(0.2 0.05 260 / 0.7);
    --color-border-glass: oklch(1 0 0 / 0.08);

    /* Depth & Shadows (GPU Optimized) */
    --shadow-spatial-sm: 0 4px 12px -2px oklch(0 0 0 / 0.3),
      inset 0 1px 0 oklch(1 1 1 / 0.1);
    --shadow-spatial-md: 0 12px 24px -6px oklch(0 0 0 / 0.4),
      inset 0 1px 0 oklch(1 1 1 / 0.1);
    --shadow-spatial-lg: 0 24px 48px -12px oklch(0 0 0 / 0.5),
      inset 0 1px 0 oklch(1 1 1 / 0.15);

    /* Motion (Spring Physics) */
    --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  }

  .app-layout {
    display: flex;
    height: 100%;
    width: 100%;
    background-color: var(--bg-app);
    isolation: isolate;
    position: relative;
    /* Hardware Acceleration Hint */
    will-change: transform;

    /* Global texture overlay */
    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: var(--bg-noise);
      pointer-events: none;
      z-index: 9999;
      opacity: 0.6;
      mix-blend-mode: overlay;
    }
  }

  .main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    min-height: 0; /* Critical for flex children to shrink properly */
    /* Gradient for depth */
    background: radial-gradient(
      circle at 50% -20%,
      oklch(0.25 0.05 260 / 0.1),
      transparent 70%
    );
  }

  .studio-workspace {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 0;
    min-height: 0; /* Critical for nested flex */
    overflow: hidden;
    view-transition-name: workspace;
  }
}
